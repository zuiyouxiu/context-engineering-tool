# 产品上下文

本文件提供项目的高层概览以及预期创建的产品信息。最初基于 projectBrief.md（如果提供）和工作目录中所有其他可用的项目相关信息。本文件旨在随着项目发展而更新，并应用于指导项目的所有其他方面的目标和上下文。

## 项目概述

**项目名称**: 上下文工程管理工具 (Context Engineering Tool)
**版本**: v2.0.0
**类型**: MCP (Model Context Protocol) 服务器
**主要语言**: TypeScript
**目标平台**: Node.js 16+

## 项目目标

* **构建智能上下文工程系统**: 基于上下文工程理念，为AI编程工具提供动态、智能的项目管理能力
* **实现多源信息整合**: 无缝整合项目文件、用户偏好、记忆系统、外部知识等多种信息源
* **提供质量保证机制**: 自动评估上下文质量，确保LLM能够可靠完成指定任务
* **支持记忆学习系统**: 维护短期和长期记忆，实现个性化的AI协作体验
* **保持向后兼容性**: 在提供新功能的同时，完全兼容v1.0版本的所有功能

## 关键功能

### 核心功能模块
* **动态上下文构建器**: 实时整合多源信息，构建任务相关的智能上下文
* **记忆管理系统**: 维护短期记忆（对话历史、操作记录）和长期记忆（用户偏好、学习进度）
* **多源信息整合器**: 整合项目文件、用户画像、检索信息、RAG信息、MCP信息
* **质量检查器**: 自动评估上下文完整性、可行性、清晰度，提供优化建议
* **智能格式化器**: 优化信息呈现格式，提升LLM理解效果

### MCP工具接口
* **build-dynamic-context**: 动态构建任务上下文
* **manage-memory**: 记忆管理操作
* **retrieve-external-knowledge**: 外部知识检索
* **get-context-info**: 获取完整项目上下文
* **update-context-engineering**: 智能更新指导
* **init-context-engineering**: 项目初始化

### 外部工具集成
* **网络搜索**: 获取最新技术信息和解决方案
* **代码索引搜索**: 查找项目中的相关代码
* **文件搜索**: 定位相关项目文件
* **库文档查询**: 获取第三方库的最新文档

## 整体架构

### 技术栈
* **运行时**: Node.js 16+
* **开发语言**: TypeScript
* **协议**: Model Context Protocol (MCP)
* **依赖管理**: npm
* **构建工具**: TypeScript Compiler

### 目录结构
```
src/
├── core/                    # 核心引擎
│   ├── context-builder.ts   # 动态上下文构建器
│   ├── memory-manager.ts    # 记忆管理系统
│   ├── multi-source-integrator.ts  # 多源信息整合器
│   └── quality-checker.ts   # 上下文质量检查器
├── services/
│   └── intelligent-formatter.ts    # 智能格式化器
├── types/
│   └── context-types.ts     # 完整类型定义
└── utils/
    └── path-utils.ts        # 工具函数
```

### 数据流架构
```
用户请求 → 任务分析 → 多源信息收集 → 上下文构建 → 质量评估 → 格式化输出 → LLM处理
    ↓
记忆更新 ← 结果反馈 ← 执行监控 ← 任务执行
```

### 核心设计原则
* **上下文工程理念**: 上下文工程 = 提示词 + 用户画像 + 记忆 + 检索信息 + RAG信息 + MCP信息
* **动态适应性**: 根据任务类型和复杂度动态调整上下文构建策略
* **质量优先**: 确保提供的上下文信息准确、完整、相关
* **用户中心**: 基于用户偏好和历史经验提供个性化服务
* **可扩展性**: 支持新的信息源和工具的无缝集成

---
**更新日志**:
- 2025-07-24 15:24:16 - 初始化文件结构
- 2025-07-24 15:30:00 - 完善项目概述、目标、功能和架构信息